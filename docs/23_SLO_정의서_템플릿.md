# SLO 정의서 템플릿 (Service Level Objective)
- 버전: 1.0
- 작성일: 2026-02-12
- 목적: 서비스 수준 목표(SLO) 정의 및 에러 버짓 관리 체계 수립
- 원칙: SLO 위반 시 자동 경고 + 인시던트 생성 (원칙 5: 정책=매니저)

---

## 1) 기본 정보
- 서비스명:
- 소유 BU/본부:
- 작성자:
- 검토자: (운영본부 SRE)
- 승인자: (COO)
- 작성일:
- 유효기간: (분기별 갱신)

---

## 2) 가용성 목표 (Availability SLO)

### 목표 정의
| 지표 | 목표값 | 측정 윈도우 | 다운타임 허용 |
|------|--------|-----------|-------------|
| 가용성 (Uptime) | 99.9% | 30일 | ~43분/월 |
| 가용성 (Uptime) | 99.95% | 30일 | ~21분/월 |
| 가용성 (Uptime) | 99.99% | 30일 | ~4분/월 |

**선택한 목표**: ______% (30일 기준)

### 가용성 측정 방법
- **모니터링 위치**: 외부 프로브 (고객 관점)
- **측정 주기**: 1분마다 헬스체크
- **가용 판정 기준**: HTTP 200 응답 + 응답시간 < 5초
- **다운 판정 기준**: 3회 연속 실패 또는 HTTP 5xx

### 계획된 유지보수
- 계획된 유지보수는 가용성 계산에서 제외
- 단, 사전 공지 필수 (최소 72시간 전)
- 유지보수 시간대: 매주 일요일 02:00~04:00 (최대 2시간)

---

## 3) 응답 시간 목표 (Latency SLO)

### 목표 정의
| 엔드포인트 | p50 목표 | p95 목표 | p99 목표 | 측정 윈도우 |
|-----------|---------|---------|---------|-----------|
| API: /auth/* | <100ms | <200ms | <500ms | 1시간 |
| API: /data/* | <500ms | <1s | <2s | 1시간 |
| 페이지 로드 | <1s | <2s | <3s | 1시간 |
| 백그라운드 작업 | <10s | <30s | <60s | 1시간 |

### 응답 시간 측정 방법
- **측정 지점**: 서버 사이드 (애플리케이션 로그)
- **샘플링**: 전체 트래픽 100% 수집
- **타임아웃**: 30초 (이후 응답은 실패로 간주)

### 응답 시간 SLO 위반 기준
- p95가 목표의 120% 초과 시 (예: 목표 200ms → 240ms 초과)
- 또는 p99가 목표의 150% 초과 시

---

## 4) 에러율 목표 (Error Rate SLO)

### 목표 정의
| 에러 타입 | 목표 에러율 | 측정 윈도우 |
|----------|-----------|-----------|
| HTTP 5xx (서버 에러) | <0.1% | 1시간 |
| HTTP 4xx (클라이언트 에러) | <5% | 1시간 |
| 타임아웃 | <0.5% | 1시간 |
| 데이터 정합성 에러 | <0.01% | 24시간 |

### 에러율 계산식
```
에러율 = (에러 요청 수 / 전체 요청 수) × 100%
```

### 에러 분류
- **5xx**: 서버 장애, 의존 서비스 실패, 내부 버그
- **4xx**: 잘못된 요청, 인증 실패, 권한 부족
- **타임아웃**: 응답 시간 30초 초과
- **데이터 정합성**: DB 불일치, 중복 생성, 누락

---

## 5) 에러 버짓 (Error Budget)

### 에러 버짓 정의
- **가용성 목표가 99.9%일 때**: 0.1% = 에러 버짓
- 즉, 30일 중 ~43분의 다운타임 허용

### 에러 버짓 계산 예시
```
총 요청 수 (30일) = 10,000,000
목표 가용성 = 99.9%
에러 버짓 = 10,000,000 × 0.1% = 10,000건 실패 허용
```

### 에러 버짓 소진 정책 (원칙 5: 정책=매니저)

| 에러 버짓 소진률 | 자동 조치 | 담당자 |
|---------------|---------|--------|
| <50% | 정상 운영 | - |
| 50~75% | 경고 알림, 원인 분석 시작 | 운영본부 SRE |
| 75~90% | 새 기능 배포 중단, 안정화 우선 | COO 승인 필요 |
| 90~100% | 모든 배포 중단, 긴급 안정화 | COO + CEO 통보 |
| 100% 초과 | SLO 미달 선언, 포스트모템 필수 | 전사 알림 |

### 에러 버짓 리셋
- 매월 1일 00:00 UTC 자동 리셋
- 단, SLO 미달 사건은 포스트모템 완료 후 리셋

---

## 6) SLO 위반 자동 경고 체계

### 경고 레벨 정의
| 레벨 | 조건 | 자동 조치 | 통보 대상 |
|------|------|---------|----------|
| Warning | SLO의 90% 달성 실패 | 모니터링 강화 | 운영본부 SRE |
| Critical | SLO 위반 확정 | 인시던트 자동 생성 (Sev 2) | 운영본부 + 소유 BU |
| Emergency | 에러 버짓 100% 소진 | 인시던트 자동 생성 (Sev 1) | COO + CEO + 전사 |

### 자동 인시던트 생성
- SLO 위반 감지 시 자동으로 인시던트 티켓 생성 (원칙 3)
- 티켓 필드 자동 입력:
  - 제목: "SLO 위반: [서비스명] - [지표]"
  - 우선순위: Sev 1 또는 Sev 2
  - 담당자: 소유 BU + 운영본부
  - 근거: 현재 지표값, 목표값, 위반 시간

### 자동 알림 채널
- SendMessage로 관련 에이전트 즉시 통보
- 대시보드 상단 배너 표시
- 월간 SLO 리포트에 자동 포함

---

## 7) SLO 모니터링 대시보드

### 실시간 지표
- 현재 가용성 (99.xx%)
- 현재 p50/p95/p99 응답시간
- 현재 에러율 (5xx, 4xx)
- 에러 버짓 소진률 (%)

### 주간 리포트 (매주 월요일 09:00)
- 지난주 SLO 달성 여부 (✅/❌)
- 가용성/응답시간/에러율 추이 그래프
- SLO 위반 발생 시 근본 원인 요약
- 개선 조치 진행 현황

### 월간 리포트 (매월 1일 09:00)
- 월간 SLO 달성률 (%)
- 에러 버짓 소진 이력
- 다운타임 총합 및 원인 분류
- 다음 달 SLO 조정 제안 (필요 시)

---

## 8) SLO 조정 프로세스

### SLO 상향 조정 (더 엄격하게)
- **시기**: 연속 3개월 SLO 초과 달성 (예: 목표 99.9%, 실제 99.95%)
- **조정폭**: 한 단계 상향 (99.9% → 99.95%)
- **승인**: COO + 소유 BU 리더
- **효과**: 고객 신뢰 증가, 운영 부담 증가

### SLO 하향 조정 (더 관대하게)
- **시기**: 연속 2개월 SLO 미달 + 근본 원인 해결 불가
- **조정폭**: 한 단계 하향 (99.95% → 99.9%)
- **승인**: COO + CEO (고객 영향 검토 필수)
- **효과**: 운영 부담 감소, 고객 기대 관리 필요

### 임시 SLO (예외)
- **상황**: 대규모 마이그레이션, 인프라 업그레이드 등
- **기간**: 최대 1개월
- **승인**: COO + CEO
- **조건**: 고객 사전 공지 필수

---

## 9) SLO와 SLA의 관계

### SLO (Service Level Objective) - 내부 목표
- 조직 내부의 운영 목표
- 고객에게 명시적 약속 없음
- SLO 미달 시 내부 개선 조치

### SLA (Service Level Agreement) - 고객 약속
- 고객과의 계약상 약속
- SLA는 항상 SLO보다 관대함 (버퍼 확보)
- SLA 미달 시 보상/크레딧 제공

### 권장 관계
```
SLA = SLO - 버퍼
예시:
- SLO 가용성: 99.95%
- SLA 가용성: 99.9%
- 버퍼: 0.05% (약 21분/월)
```

---

## 10) 체크리스트

### SLO 정의 시
- [ ] 서비스 특성에 맞는 목표값 설정 (과도하지 않게)
- [ ] 측정 방법 및 도구 준비
- [ ] 에러 버짓 정책 정의
- [ ] 자동 경고 체계 구성
- [ ] 운영본부 SRE 검토
- [ ] COO 승인

### SLO 운영 중
- [ ] 실시간 대시보드 모니터링
- [ ] 주간 리포트 검토
- [ ] SLO 위반 시 즉시 대응
- [ ] 에러 버짓 50% 초과 시 원인 분석
- [ ] 월간 SLO 달성률 리뷰

### SLO 위반 발생 시
- [ ] 인시던트 티켓 확인 (자동 생성)
- [ ] 근본 원인 분석 (RCA)
- [ ] 개선 조치 실행
- [ ] 포스트모템 작성 (필수)
- [ ] SLO 조정 필요성 검토

---

## 11) 승인

- 작성자: (소유 BU)
- 검토자: (운영본부 SRE)
- 승인자: (COO)
- 승인 일자:
- 다음 리뷰 예정일: (분기 +3개월)
